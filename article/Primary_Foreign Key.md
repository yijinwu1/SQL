<h1><B>Primary Key 與 Foreign Key</B></h1>

<h3><B>Primary Key</B></h3>
欄位在資料表中的唯一性，主鍵欄位中的每一筆資料在資料表中都必需是獨一無二的。<br/>

<h3><B>Foreign Key</B></h3>
外鍵是一個 (或多個) 指向其它資料表中主鍵的欄位，<br/>
它限制欄位值只能來自另一個資料表的主鍵欄位，用來確定資料的參考完整性 (Referential Integrity)。<br/>

<h3><B>設置Foreign Key</B></h3>
1.潛在的資料完整性問題<br/>
  缺少外鍵的明顯問題是資料庫不能強制處理引用的完整性，<br/>
  如果在上層應用沒有正確處理，則可能會導致資料不一致（子資料列沒有相對應的父資料列）。<br/>
2.資料表關連性不清楚<br/>
  資料庫中缺少外部鍵另一個不太明顯的負面影響是，不了解該資料模式的人很難找到正確的資料表並找出資料表的關連。<br/>
  這可能會導致嚴重的資料庫查詢和報表問題。<br/>
   
<h3><B>缺乏外部鍵的問題</B></h3>  
1.效能<br/>
  表上擁有有意義的外部鍵可以提高資料品質，但會影響插入資料、更新資料和刪除資料操作的效能。<br/>
  在這些任務之前，資料庫需要檢查它是否違反資料完整性。<br/>
  這也就是為什麼一些系統架構師和 DBA 完全放棄外部鍵的原因。<br/>
  資料倉儲和分析資料庫尤其如此，這些資料倉儲和分析資料庫不以交易方式（一次一個資料列）處理資料，而是批量處理資料。<br/>
  效能是資料倉儲和智慧商業的一切。<br/>
2.老舊資料<br/>
  料庫在設計時需要儲存來自舊資料庫和來源的殘留資料，這些資料可能對資料品質和完整性沒有那麼嚴格。<br/>
  為了能夠容納又舊又髒資料的架構師，<br/>
  可以選擇，a：清理和轉換殘留資料（昂貴的練習），或者，b：放棄在資料庫級別上強制維護參照完整性。<br/>
  一些整合好的 ERP 和 CRM 應用服務也會使用這種方法。<br/>
3.資料表重建<br/>
  資料庫，如資料倉儲，分段或中介資料庫，需要經常從外部資料來源重新載入資料。<br/>
  這會導致重新載入時資料的不一致（在父資料表為空的情況下，子資料表可能已載入）。<br/>
  這可以通過在重新載入時禁用外部鍵來繞過。<br/>
  然而，這會引入了額外的邏輯和複雜性，以及另一個可能的錯誤點。<br/>
  如上所述，對效能也會有負面影響。通常，成本大於效益，但開發人員不需要擔心細節。<br/>
4.有更高層級的開發管理<br/>
  用程式具有程式設計層的框架，在實體資料庫上建立了另一個邏輯層。<br/>
  開發人員不使用 INSERT 或 UPDATE 語句來修改資料，<br/>
  他們使用 API，或者採用在後台執行操作的框架。像是 ORM（Object-Relational Mapping）框架或 Ruby on Rails 框架就是這種情況。<br/>
  這些工具負責維護資料參照的完整性，並與 RDBMS 一起建立更高等級的資料庫引擎。<br/>
  這些框架可以自己建立資料庫資料表，而通常不建立外部鍵。<br/>
  使用這些工具的開發人員很少干預自動產生的資料庫結構，並且也不使用主鍵。
5.跨資料庫關連<br/>
  是資料庫不使用外部鍵的正確理由，但也確實是某種因素。<br/>
  有些資料庫跨越更多實體資料庫甚至引擎，並且建立跨越資料庫的主鍵在技術上可能不太可行。<br/>
  SQL Server就是一個很好的例子 - 它不能在同一台服務器上的兩個資料庫上建立主鍵。<br/>
  這種架構在大型系統中很常見。<br/>
6.資料庫可移植考量<br/>
  與前一個類似，一些應用程式設計上假設資料庫平台（DBMS）是不可知的，並能夠在 Oracle、SQL Server、DB2 或 Sybase 等各種資料庫上運作。<br/>
  設計人員不想被綁定在任何特定的平台，並將所有邏輯推送到應用程式層，盡可能簡單地維持資料庫層就好。<br/>
7.簡易的軟體工程管理<br/>
  在建立資料庫時，如果要儲存資料，則需要建立一些資料表和資料列。這是最低的限度。<br/>
  但是，你不必建立保持資料一致性的結構，如主鍵、唯一鍵、外部鍵或限制條件。<br/>
  這需要一些努力，但沒有直接的好處。一些架構師和資料庫管理員只是忽略了這一部分。<br/>
8.隱藏資料關連模型<br/>
  也許這是一個遙不可及的過程，但也許有時候是因為人們不希望別人太容易就知道太多。<br/>
